<!DOCTYPE html>
<html>
<head>
    <title>socket.io chat</title>
    <script src="/socket.io/socket.io.js"></script>
    <script src="https://code.jquery.com/jquery-1.11.1.js"></script>
</head>
<body>
    <ul id="messages"></ul>
    <form id="message_form" action="#">
      <input id="input_msg" autocomplete="off" /><button>Send</button>
    </form>
    <script>
        var socketio = io();
        $(function(){
            socketio.on('setnewtitle',function(msg){
                console.log(msg);
                $('#messages').append($('<li>')
                    .text(`set new title: ${msg.title}`));
            });
            socketio.on('timeline',function(msg){
                console.log(msg);
                $('#messages').append($('<li>')
                    .text(`recv new : BPM:${msg.beatsPerMinute}, items:${msg.timelines.length}`));
            });
            socketio.on('execnotify',function(msg){
                console.log(msg);
                if (msg.type == "controller") {
                    $('#messages').append($('<li>')
                        .text(`midi: ${msg.type}, ch:${msg.channel}, controllerType: ${msg.controllerType}, value:${msg.value}`));
                } else {
                    $('#messages').append($('<li>')
                        .text(`midi: ${msg.type}, ch:${msg.channel}, note: ${msg.noteNumber}, velocity:${msg.velocity}`));
                }
            });
        });
    </script>
</body>
</html>